#!/bin/sh

# Check for schema changes
if git diff --cached --name-only | grep -q "instant.schema.ts"; then
  echo "ğŸ“‹ Schema changes detected, running safety check..."
  yarn run db:check || exit 1
fi

echo "ğŸ”§ Running lint-staged (auto-fix + verify)..."
npx lint-staged || exit 1

echo "ğŸ“ Running TypeScript type check..."
yarn run type-check || exit 1

echo "ğŸ§ª Running tests..."
yarn test || exit 1

echo "âœ… All checks passed!"
